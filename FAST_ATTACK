-- Gá»­i thÃ´ng bÃ¡o khi vÃ o game
pcall(function()
    game.StarterGui:SetCore("SendNotification", {
        Title = "âš¡FAST ATTACKðŸ‘Š";
        Text = "Fast attack will automatically turn on when you play Blox Fruit.";
        Duration = 5;
        Icon = "rbxthumb://type=Asset&id=91623223092520&w=150&h=150";
    })
end)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local EnemiesFolder = workspace:WaitForChild("Enemies")
local LocalPlayer = Players.LocalPlayer

-- TÃ¬m zombie gáº§n nháº¥t
local function getClosestEnemy()
    local closestEnemy = nil
    local shortestDistance = math.huge
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

    if hrp then
        for _, enemy in pairs(EnemiesFolder:GetChildren()) do
            local part = enemy:FindFirstChild("UpperTorso")
            if part then
                local dist = (part.Position - hrp.Position).Magnitude
                if dist < shortestDistance then
                    shortestDistance = dist
                    closestEnemy = part
                end
            end
        end
    end

    return closestEnemy
end

-- Æ¯u tiÃªn táº¥n cÃ´ng zombie, náº¿u khÃ´ng cÃ³ thÃ¬ má»›i Ä‘Ã¡nh player
task.spawn(function()
    while task.wait(0.1) do
        local targetPart = getClosestEnemy()
        if targetPart then
            Net:WaitForChild("RE/RegisterHit"):FireServer(targetPart, {}, "3269aee8")
        else
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                    local args = {
                        [1] = player.Character.Head,
                        [2] = {},
                        [4] = "326880d6" -- Token cho ngÆ°á»i chÆ¡i
                    }
                    Net:WaitForChild("RE/RegisterHit"):FireServer(unpack(args))
                end
            end
        end
    end
end)

wait(1)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local EnemiesFolder = workspace:WaitForChild("Enemies")
local LocalPlayer = Players.LocalPlayer

-- Táº¥n cÃ´ng táº¥t cáº£ ngÆ°á»i chÆ¡i liÃªn tá»¥c
task.spawn(function()
    while task.wait(0.1) do
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                local args = {
                    [1] = player.Character.Head,
                    [2] = {},
                    [4] = "326880d6" -- Token cho ngÆ°á»i chÆ¡i
                }
                Net:WaitForChild("RE/RegisterHit"):FireServer(unpack(args))
            end
        end
    end
end)

-- TÃ¬m zombie gáº§n nháº¥t
local function getClosestEnemy()
    local closestEnemy = nil
    local shortestDistance = math.huge
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

    if hrp then
        for _, enemy in pairs(EnemiesFolder:GetChildren()) do
            local part = enemy:FindFirstChild("UpperTorso")
            if part then
                local dist = (part.Position - hrp.Position).Magnitude
                if dist < shortestDistance then
                    shortestDistance = dist
                    closestEnemy = part
                end
            end
        end
    end

    return closestEnemy
end

-- Táº¥n cÃ´ng zombie gáº§n nháº¥t cá»±c nhanh
task.spawn(function()
    while task.wait(0.1) do
        local targetPart = getClosestEnemy()
        if targetPart then
            Net:WaitForChild("RE/RegisterHit"):FireServer(targetPart, {}, "3269aee8") -- Token cho NPC
        end
    end
end)
